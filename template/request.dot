const chai = require('chai')
chai.use(require('chai-http'))
const json_responses = require('{{jsonSchemaPath}}');
const requestHelper = require('{{helperPath}}');
require('dotenv').config()
const api = chai.request(process.env.APP_URL);

class request {
  constructor() {
    // Write your constructor here, if you need
  }

  request(...args) {
    const res = api.{{method}}("{{endpoint}}"){{query}}
    {{header}}{{bodyFunc}}
    .end(new requestHelper().getExpectFunc(args))
    
    return res
  }
 
  body(...args) {
    // your rawJSON body
    let obj = {{objectBody}}

    // mapping your changes
    new requestHelper().objectMapping(obj, args[0])

    // Return it
    return obj
  }

  expect(cases="success") {
    return new requestHelper().getSchema(json_responses, cases)
  }
}

module.exports = request