const chai = require('chai')
chai.use(require('chai-http'))
const json_responses = require('{{jsonSchemaPath}}');
const requestHelper = require('{{helperPath}}');
require('dotenv').config()

class request {
    constructor() {
      	// Write your constructor here, if you need
		this.api = chai.request(process.env.APP_URL)
		this.path = "{{endpoint}}"
    }

    // This method used for hit test api endpoint
    request(...args) {
		const response = this.api.{{method}}(this.path){{query}}{{header}}{{bodyFunc}}
		.end(new requestHelper().getExpectFunc(args))
		
		return response
    }
  
    // This method used for provide body or payload of the request and return object
    body(...args) {
		// your rawJSON body
		let obj = {{objectBody}}

		// mapping your changes
		new requestHelper().objectMapping(obj, args)

		// Return it
		return obj
    }

	// This method used for provide expectation and return json schema
    expect(cases="success") {
      	return new requestHelper().getSchema(json_responses, cases)
    }
}

module.exports = request